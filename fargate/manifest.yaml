name: aws-fargate
type: service
icon: ./icon.svg
required_identities:
  - aws:iam:role
deployment:
  terraform: ./module
runtime:
  go_module: github.com/nitrictech/plugins/aws/fargate

inputs:
  alb_arn:
    type: string
    required: true
    description: "ARN of the Application Load Balancer."
  alb_security_group:
    type: string
    description: "Security group ID for ALB network rules. Uses ALB's existing security group if not specified"
  cpu:
    type: number
    description: "CPU units allocated - 256 equals 0.25 vCPU, options include 512, 1024, 2048, 4096. Defaults to 256"
  memory:
    type: number
    description: "RAM in MB, must follow AWS Fargate CPU-to-memory ratios (e.g. 256 CPU supports 512-2048 MB). Defaults to 512.
  environment:
    type: map(string)
    description: "Key-value pairs accessible as environment variables in your container. Defaults to empty"
  vpc_id:
    type: string
    description: "VPC ID for network isolation. Uses default VPC if not specified"
  subnets:
    type: list(string)
    description: "Subnet IDs in different availability zones for high availability. Uses default subnets if not specified"
  security_groups:
    type: list(string)
    description: "Additional security groups for network access control. Creates new security group if not specified"

outputs: {}
